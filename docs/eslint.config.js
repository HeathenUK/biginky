// ESLint configuration for GitHub Pages web UI
export default [
    {
        languageOptions: {
            ecmaVersion: 2021,
            sourceType: "script",
            globals: {
                // Browser globals
                window: "readonly",
                document: "readonly",
                console: "readonly",
                confirm: "readonly",
                localStorage: "readonly",
                sessionStorage: "readonly",
                setTimeout: "readonly",
                clearTimeout: "readonly",
                setInterval: "readonly",
                clearInterval: "readonly",
                requestAnimationFrame: "readonly",
                performance: "readonly",
                crypto: "readonly",
                TextEncoder: "readonly",
                TextDecoder: "readonly",
                Uint8Array: "readonly",
                ArrayBuffer: "readonly",
                btoa: "readonly",
                atob: "readonly",
                Image: "readonly",
                FileReader: "readonly",
                CompressionStream: "readonly",
                DecompressionStream: "readonly",
                Paho: "readonly",
                Event: "readonly",
                // Global variables from config.js
                MQTT_BROKER: "writable",
                MQTT_PORT: "writable",
                MQTT_TOPIC: "writable",
                MQTT_TOPIC_STATUS: "writable",
                MQTT_TOPIC_THUMB: "writable",
                MQTT_TOPIC_MEDIA: "writable",
                EMBEDDED_TOKEN: "writable",
                MAX_RECONNECT_ATTEMPTS: "writable",
                INITIAL_RECONNECT_DELAY: "writable",
                MQTT_CONFIG: "readonly",
                currentFramebufferData: "writable",
                // Global state variables from config.js
                mqttClient: "writable",
                isConnected: "writable",
                webUIPassword: "writable",
                sessionEncryptionKey: "writable",
                isBusy: "writable",
                busyTimeoutId: "writable",
                busyCountdownInterval: "writable",
                nextWakeTime: "writable",
                autoReconnectEnabled: "writable",
                reconnectAttempts: "writable",
                reconnectTimeoutId: "writable",
                pahoLibraryLoaded: "writable",
                // Global functions from modules (loaded via script tags)
                checkPahoLoaded: "readonly",
                loadPahoFallback: "readonly",
                createColorPicker: "readonly",
                initSessionEncryptionKey: "readonly",
                encryptPasswordForStorage: "readonly",
                decryptPasswordFromStorage: "readonly",
                encryptMessage: "readonly",
                decryptMessage: "readonly",
                deriveHMACKey: "readonly",
                deriveEncryptionKey: "readonly",
                computeHMAC: "readonly",
                verifyHMAC: "readonly",
                loadPassword: "readonly",
                savePassword: "readonly",
                clearPassword: "readonly",
                verifyPasswordByDecryption: "readonly",
                updateConnectionStatus: "readonly",
                updatePasswordStatus: "readonly",
                logCommand: "readonly",
                updateDeviceStatus: "readonly",
                formatTimeUntilWake: "readonly",
                updateBusyMessage: "readonly",
                setBusyState: "readonly",
                showStatus: "readonly",
                toggleSection: "readonly",
                restoreSectionStates: "readonly",
                setupKeyboardShortcuts: "readonly",
                updateMediaMappingsTable: "readonly",
                updateThumbnail: "readonly",
                showMediaItem: "readonly",
                connectMQTT: "readonly",
                disconnectMQTT: "readonly",
                publishMessage: "readonly",
                scheduleReconnect: "readonly",
                cancelReconnect: "readonly",
                sendTextDisplay: "readonly",
                sendCanvasToDisplay: "readonly",
                sendCommand: "readonly"
            }
        },
        rules: {
            "no-unused-vars": ["warn", { "argsIgnorePattern": "^_" }],
            "no-undef": "error",
            "no-console": "off" // Allow console.log for debugging
        }
    }
];

