; PlatformIO Project Configuration File
;
;   Build options: build flags, source filter
;   Upload options: custom upload port, speed and extra flags
;   Library options: dependencies, extra library storages
;   Advanced options: extra scripting
;
; Please visit documentation for the other options and examples
; https://docs.platformio.org/page/projectconf.html

[env:pico_plus_2w]
platform = https://github.com/maxgerhardt/platform-raspberrypi.git
board = pimoroni_pico_plus_2w
framework = arduino
board_build.core = earlephilhower
board_build.psram_length = 0x800000

build_unflags = -Os
build_flags = 
	-O2
	-DEL133UF1_SPI_SPEED=40000000
	-DUSE_PSRAM=1
	-I$PROJECT_PACKAGES_DIR/framework-arduinopico/pico-sdk/src/rp2_common/hardware_powman/include
	-I$PROJECT_PACKAGES_DIR/framework-arduinopico/pico-sdk/src/rp2_common/pico_aon_timer/include
build_src_filter = 
	+<*>
	+<../../../.platformio/packages/framework-arduinopico/pico-sdk/src/rp2_common/hardware_powman/powman.c>
	+<../../../.platformio/packages/framework-arduinopico/pico-sdk/src/rp2_common/pico_aon_timer/aon_timer.c>
monitor_speed = 115200
lib_deps = 
	kikuchan98/pngle@^1.1.0
	SdFat@^2.2.3
build_type = release

; Pre-build script to regenerate color LUT if palette changes
; The LUT is stored in PROGMEM (flash) for zero runtime cost
; To regenerate manually: python scripts/generate_color_lut.py lib/EL133UF1/EL133UF1_ColorLUT.h
extra_scripts = pre:scripts/pre_build.py

; ============================================================================
; ESP32-P4-WIFI6 Configuration
; ============================================================================
; Uses pioarduino platform 55.03.34 which includes ESP32-P4 support
; with arduino-esp32 3.3.4 based on ESP-IDF 5.5
;
; Pin mapping must be adjusted for your specific ESP32-P4-WIFI6 board.
; PSRAM: ESP32-P4 supports up to 32MB PSRAM (Octal mode @ 200MHz)
; ============================================================================

[env:esp32p4_wifi6]
; pioarduino 55.03.34 has full ESP32-P4 support
platform = https://github.com/pioarduino/platform-espressif32/releases/download/55.03.34/platform-espressif32.zip
board = esp32-p4
framework = arduino

; Build configuration
build_unflags = -Os
build_flags = 
	-O2
	-DEL133UF1_SPI_SPEED=40000000
	-DUSE_PSRAM=1
	-DBOARD_HAS_PSRAM
	; ESP32-P4 pin definitions - ADJUST FOR YOUR BOARD
	-DPIN_SPI_SCK=12
	-DPIN_SPI_MOSI=11
	-DPIN_CS0=10
	-DPIN_CS1=9
	-DPIN_DC=46
	-DPIN_RESET=3
	-DPIN_BUSY=8
	; I2C for RTC (DS3231)
	-DPIN_RTC_SDA=4
	-DPIN_RTC_SCL=5
	-DPIN_RTC_INT=6

build_src_filter = 
	+<*>

; Ignore RP2350-specific library
lib_ignore = 
	pico_sleep

monitor_speed = 115200

lib_deps = 
	kikuchan98/pngle@^1.1.0

build_type = release

; ============================================================================
; ESP32-P4 Minimal Test Build (Display Only)
; ============================================================================
; Use this for initial hardware testing - excludes WiFi/AI features

[env:esp32p4_minimal]
platform = https://github.com/pioarduino/platform-espressif32/releases/download/55.03.34/platform-espressif32.zip
board = esp32-p4
framework = arduino

build_unflags = -Os
build_flags = 
	-O2
	-DEL133UF1_SPI_SPEED=40000000
	-DUSE_PSRAM=1
	-DBOARD_HAS_PSRAM
	; Disable features for minimal test build
	-DDISABLE_WIFI=1
	-DDISABLE_SDIO_TEST=1
	-DDISABLE_AI_IMAGE=1
	-DDISABLE_SLEEP=1
	; ESP32-P4 pin definitions - ADJUST FOR YOUR BOARD
	-DPIN_SPI_SCK=12
	-DPIN_SPI_MOSI=11
	-DPIN_CS0=10
	-DPIN_CS1=9
	-DPIN_DC=46
	-DPIN_RESET=3
	-DPIN_BUSY=8

build_src_filter = 
	+<*>

lib_ignore = 
	pico_sleep

monitor_speed = 115200

lib_deps = 
	kikuchan98/pngle@^1.1.0

build_type = release
